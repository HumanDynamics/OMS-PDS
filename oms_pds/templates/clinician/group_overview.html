{% extends "clinician/clinician_base.html" %}
{% load verbatim %}


{% block scripts %}
<script>
 var participant_data = {{participant_data_json|safe}};
 console.log("participant data:", participant_data);
 var aggregate_data = {{aggregate_scores|safe}};
 console.log(aggregate_data);
 var status = "{{status|safe}}";
</script>
<script type="text/coffeescript" src="/static/mgh/contents/clinician_group_overview.coffee"></script>

{% endblock %}

{% block content %}
<link rel="import" href="/static/mgh/clinician-custom-components/agg-select.html" rel="import">
<link rel="import" href="/static/mgh/clinician-custom-components/group-patient-select.html" rel="import">

<div class="scontainer">
    <div horizontal center-justified layout id="group-overview">
        <div layout vertical id="group-charts">
            <div layout horizontal>
                <div flex self-center>
                    <span id="group-overview-title">Group General Overview</span>
                </div>
                <div id="agg-select" self-start>
                    <agg-select></agg-select>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <!-- <div layout vertical id="patients"> -->
    <div horizontal layout wrap id="patients">
        {% for participant in participant_data %}
        <div layout vertical center-justified class="patient" id="{{participant.uid}}">
            <div layout horizontal>
                <a self-center class="patient-name" href="/clinician/patients/{{participant.uid}}">
                    {{uid_name_map|get_item:participant.uid}} /
                </a>
                <group-patient-select self-center selected="overall" uid="{{participant.uid}}"></group-patient-select>
            </div>

            <div layout horizontal center-justified class="patient-agg-charts" id="{{participant.uid}}-agg">
                <svg self-center class="pie" id="aggChart-{{participant.uid}}"></svg>
            </div>

            <div class="patient-category-charts" id="{{participant.uid}}-categories">
                {% for category, vals in participant.scores.items %}
                <svg class="pie" id="{{category}}-{{participant.uid}}"></svg>
                {% endfor %}
            </div>

        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
